---
title: 《图解HTTP》笔记
date: 2022-08-24 15:20:05
tags: 读书笔记
---

本篇博客图文内容均来自《图解HTTP》
作者：【日】上野宣  
译者：于均良  
出版社：人民邮电出版社


仅做读书笔记使用（并非完全按照书内内容排版）
已记录至第一章
<!-- more -->

# 第一章：了解Web及网络基础
## HTTP的诞生
### HTTP诞生的背景
现在已提出了3项WWW构建技术，分别是：
1. 把SGML（Standard Generalized Markup Language，标准通用标记语言）作为页面的文本标记语言的HTML（HyperText Markup Language，超文本标记语言）；
2. 作为文档传递协议的HTTP；
3. 指定文档所在地址的URL（Uniform Resource Locator，统一资源定位符）。

WWW这一名称，是Web浏览器当年用来浏览超文本的客户端应用程序时的名称。现在则用来表示这一系列的集合，也可简称为Web。

*HTTP/0.9*
HTTP于1990年问世。那时的HTTP并没有作为正式的标准被建立。这时的HTTP其实含有HTTP/1.0之前版本的意思，因此被称为HTTP/0.9。

*HTTP/1.0*
HTTP正式作为标准被公布是在1996年的5月，版本被命名为HTTP/1.0，并记载于RFC1945。虽说是初期标准，但该协议标准至今仍被广泛使用在服务器端。

当初的标准是RFC2068，之后发布的修订版RFC2616就是当前的最新版本。

当年HTTP协议的出现主要是为了解决文本传输的难题。由于协议本身非常简单，于是在此基础上设想了很多应用方法并投入了实际使用。
现在HTTP协议已经超出了Web这个框架的局限，被运用到了各种场景里。而作为Web文档传输协议的HTTP，它的版本几乎没有更新。
新一代HTTP/2.0正在制订中，但要达到较高的使用覆盖率，仍需假以时日。

### 网络基础TCP/IP
通常使用的网络（包括互联网）是在TCP/IP协议族的基础上运作的。而HTTP属于它内部的一个子集。
TCP/IP是互联网相关的各类协议族的总称，当然也有一种说法认为，TCP/IP是指TCP和IP这两种协议，还有一种说法认为，TCP/IP是在IP协议的通信过程中，使用到的协议族的统称。
TCP/IP协议族里重要的一点就是分层。TCP/IP协议族按层次分别分为以下4层：
1. 应用层
2. 传输层
3. 网络层
4. 数据链路层

- 应用层
应用层决定了向用户提供应用服务时通信的活动。
TCP/IP协议族内预存了各类通用的应用服务。比如，FTP（File Transfer Protocol，文件传输协议）和DNS（Domain Name System，域名系统）服务就是其中两类。
HTTP协议也处于该层。

- 传输层
传输层对上层应用层，提供处于网络连接中的两台计算机之间的数据传输。
在传输层有两个性质不同的协议：TCP（Transmission Control Protocol，传输控制协议）和UDP（User Data Protocol，用户数据报协议）。

- 网络层（又称网络互联层）
网络层用来处理在网络上流动的数据包。
数据包是网络传输的最小数据单位。
该层规定了通过怎样的路径（所谓的传输路线）到达对方计算机，并把数据包传送给对方。
在通过多台网络设备或计算机进行传输时，网络层所起到的作用就是在诸多选项中选择一条传输路线。

- 数据链路层
用来处理连接网络的硬件部分。硬件上的范畴均在链路层的作用范围之内。

利用TCP/IP协议族进行网络通信时，会通过分层顺序与对方进行通信。发送端从应用层往下走，接收端则往应用层往上走。
{% asset_img 1.png 图解1 %}

发送端给接收端发送数据，经过四个层，发送端从应用层往下走，每走过一层就在数据前端加上首部名称，接收端则从链路端往上走，每走一层就把数据前端的首部名称摘去，这种把数据包装起来的方式就叫做封装
{% asset_img 2.png 图解2 %}

### 与HTTP关系密切的三个协议：IP，TCP和DNS
#### 负责传输的IP协议
按层次分，IP（Internet Protocol）网际协议位于网络层，几乎所有使用网络的系统都会用到IP协议。
IP协议的作用是把各种数据包传送给对方。而要保证确实传送到对方那里，则需要满足各类条件。其中两个重要的条件是：IP地址和MAC地址（Media Access Control Address）。
IP地址指明了节点被分配到的地址，MAC地址是指网卡所属的固定地址。
IP地址可以和MAC地址进行配对。
IP地址可变换，但MAC地址基本上不会更改。

*使用ARP协议凭借MAC地址进行通信*
*ARP是一种用以解析地址的协议，根据通信方的IP地址就可以反查出对应的MAC地址。*
*在网络上，通信的双方在同一局域网（LAN）内的情况是很少的，通常是经过多台计算机和网络设备中转才能连接到对方。而在进行中转时，会利用下一站中转设备的MAC地址来搜索下一个中转目标。这时，会采用ARP协议（Address Resolution Protocol）。*

**没有人能够全面掌握互联网中的传输状况**
**无论哪台计算机、哪台网络设备，它们都无法全面掌握互联网中的细节。**
{% asset_img 3.png 图解3 %}

#### 确保可靠性的TCP协议
按层次分，TCP位于传输层，提供可靠的字节流服务。
1. 字节流服务（Byte Stream Service）是指，为了方便传输，将大块数据分割成以报文段（segment）为单位的数据包进行管理。
2. 而可靠的传输服务是指，能够把数据准确可靠地传给对方。

**确保数据能够到达目标**
TCP协议采用了三次握手（three-way handshaking）策略，以此来确保能够将数据准确无误地送达目标处。
握手过程中使用了TCP的标志（flag）——SYN（synchronize）和ACK（acknowledgement）。
三次握手的流程为：发送端首先发送一个带SYN标志的数据包给对方。接收端收到后，回传一个带有SYN/ACK标志的数据包以示传达确认信息。最后，发送端再回传一个带ACK标志的数据包，代表“握手”结束。
***如果在握手过程中某个阶段莫名中断，TCP协议会再次以相同的顺序发送相同的数据包。***
*除了三次握手TCP还有其他各种手段来保证通信的可靠性*
{% asset_img 4.png 图解4 %}

#### 负责域名解析的DNS服务
按层次分，DNS（Domain Name System）服务是和HTTP协议一样位于应用层的协议。它提供域名到IP地址之间的解析服务。
计算机既可以被赋予IP地址，也可以被赋予主机名和域名。
用户通常使用主机名或域名来访问对方的计算机，而不是直接通过IP地址访问。因为相比IP地址那样的一组纯数字，用字母配合数字的表示形式更符合人类的记忆习惯。
但是计算机并不是人类，计算机更擅长处理一串长数字。
为了解决这类问题，DNS服务应运而生。DNS协议提供通过域名查找IP地址，或逆向从IP地址反查域名的服务。

#### 各种协议和HTTP协议的关系
我们简单通过一张图来了解上述提到的三种协在使用HTTP协议的通信中各自发挥了哪些作用。
{% asset_img 5.png 图解5 %}

